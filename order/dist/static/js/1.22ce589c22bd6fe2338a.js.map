{"version":3,"sources":["webpack:///static/js/1.22ce589c22bd6fe2338a.js","webpack:///./src/components/field/ChatInput.vue?d1ba","webpack:///./src/views/Chat.vue?23f6","webpack:///./src/components/field/ChatInput.vue?23ca","webpack:///./src/views/Chat.vue?b8f3","webpack:///./src/components/field/ChatInput.vue","webpack:///./src/views/Chat.vue","webpack:///src/components/field/ChatInput.vue","webpack:///./src/components/field/ChatInput.vue?a362","webpack:///src/views/Chat.vue","webpack:///./src/views/Chat.vue?9a41"],"names":["webpackJsonp","4Zop","module","exports","__webpack_require__","content","i","locals","6+7L","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","TMDl","bvtx","vi/S","__webpack_exports__","injectStyle","ssrContext","Chat_injectStyle","Object","defineProperty","value","ChatInput","name","props","type","String","default","placeholder","data","methods","updateValue","this","$emit","trim","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","domProps","on","input","$event","target","keyup","_k","keyCode","key","click","_v","staticRenderFns","esExports","field_ChatInput","normalizeComponent","__vue_styles__","Component","components_field_ChatInput","lib","lib_default","n","config","socket","Chat","components","toid","usericon","user","computed","state","$store","userInfo","targetUser","msgList","_this","filter","v","chatid","_user","_id","sort","join","back","$router","go","sendMsg","from","to","console","log","emit","_readmsg","userid","dispatch","created","mounted","activated","$nextTick","window","scrollTo","document","body","scrollHeight","deactivated","Chat_render","id","staticStyle","z-index","title","username","leftText","leftArrow","fixed","nativeOn","bottom","_l","item","index","_s","style","background","avatar","click-send","model","callback","$$v","expression","Chat_staticRenderFns","Chat_esExports","views_Chat","Chat_normalizeComponent","Chat___vue_styles__","Chat_Component"],"mappings":"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","file":"static/js/1.22ce589c22bd6fe2338a.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"4Zop\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"TMDl\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"4edd020d\", content, true);\n\n/***/ }),\n\n/***/ \"6+7L\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n#chat[data-v-18533905] {\\n  padding-bottom: 50px;\\n  padding-top: 46px;\\n}\\n.chat-me[data-v-18533905],\\n.chat-other[data-v-18533905] {\\n  width: 100%;\\n  text-align: right;\\n  font-size: 14px;\\n  color: #333;\\n  position: relative;\\n}\\n.chat-me .usericon[data-v-18533905],\\n.chat-other .usericon[data-v-18533905] {\\n  vertical-align: top;\\n  width: 35px;\\n}\\n.chat-me .pop-box[data-v-18533905],\\n.chat-other .pop-box[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: right;\\n}\\n.chat-me .pop-box-other[data-v-18533905],\\n.chat-other .pop-box-other[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: left;\\n}\\n.chat-me .pop[data-v-18533905],\\n.chat-other .pop[data-v-18533905] {\\n  background: rgba(6, 191, 4, 0.4);\\n  border-radius: 4px;\\n  padding: 8px 12px;\\n  display: block;\\n  height: 100%;\\n  text-align: left;\\n}\\n.chat-me .avatar[data-v-18533905],\\n.chat-other .avatar[data-v-18533905] {\\n  vertical-align: top;\\n  display: inline-block;\\n  width: 35px;\\n  height: 35px;\\n  border-radius: 50%;\\n}\\n.chat-other[data-v-18533905] {\\n  text-align: left;\\n}\\n.chat-other .pop[data-v-18533905] {\\n  background: #eee;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"D:/Users/Administrator/Desktop/workspace/order/order/src/views/Chat.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,kBAAkB;CACnB;AACD;;EAEE,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;CACpB;AACD;;EAEE,oBAAoB;EACpB,YAAY;CACb;AACD;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,aAAa;CACd;AACD;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,YAAY;CACb;AACD;;EAEE,iCAAiC;EACjC,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;EACf,aAAa;EACb,iBAAiB;CAClB;AACD;;EAEE,oBAAoB;EACpB,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,mBAAmB;CACpB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,iBAAiB;CAClB\",\"file\":\"Chat.vue\",\"sourcesContent\":[\"\\n#chat[data-v-18533905] {\\n  padding-bottom: 50px;\\n  padding-top: 46px;\\n}\\n.chat-me[data-v-18533905],\\n.chat-other[data-v-18533905] {\\n  width: 100%;\\n  text-align: right;\\n  font-size: 14px;\\n  color: #333;\\n  position: relative;\\n}\\n.chat-me .usericon[data-v-18533905],\\n.chat-other .usericon[data-v-18533905] {\\n  vertical-align: top;\\n  width: 35px;\\n}\\n.chat-me .pop-box[data-v-18533905],\\n.chat-other .pop-box[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: right;\\n}\\n.chat-me .pop-box-other[data-v-18533905],\\n.chat-other .pop-box-other[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: left;\\n}\\n.chat-me .pop[data-v-18533905],\\n.chat-other .pop[data-v-18533905] {\\n  background: rgba(6, 191, 4, 0.4);\\n  border-radius: 4px;\\n  padding: 8px 12px;\\n  display: block;\\n  height: 100%;\\n  text-align: left;\\n}\\n.chat-me .avatar[data-v-18533905],\\n.chat-other .avatar[data-v-18533905] {\\n  vertical-align: top;\\n  display: inline-block;\\n  width: 35px;\\n  height: 35px;\\n  border-radius: 50%;\\n}\\n.chat-other[data-v-18533905] {\\n  text-align: left;\\n}\\n.chat-other .pop[data-v-18533905] {\\n  background: #eee;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"TMDl\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"FZ+f\")(true);\n// imports\n\n\n// module\nexports.push([module.i, \"\\n.field__chat[data-v-65f609dc] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  height: 40px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  z-index: 99;\\n}\\n.field__chat .chat__input[data-v-65f609dc] {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  height: 40px;\\n  border: none;\\n  outline: none;\\n  font-size: 14px;\\n  text-indent: 8px;\\n}\\n.field__chat .btn__code[data-v-65f609dc] {\\n  display: inline-block;\\n  width: 60px;\\n  height: 40px;\\n  line-height: 40px;\\n  text-align: center;\\n  background: #ccc;\\n  font-size: 12px;\\n}\", \"\", {\"version\":3,\"sources\":[\"D:/Users/Administrator/Desktop/workspace/order/order/src/components/field/ChatInput.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;CACb;AACD;EACE,oBAAoB;MAChB,YAAY;UACR,QAAQ;EAChB,aAAa;EACb,aAAa;EACb,cAAc;EACd,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;CACjB\",\"file\":\"ChatInput.vue\",\"sourcesContent\":[\"\\n.field__chat[data-v-65f609dc] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  height: 40px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  z-index: 99;\\n}\\n.field__chat .chat__input[data-v-65f609dc] {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  height: 40px;\\n  border: none;\\n  outline: none;\\n  font-size: 14px;\\n  text-indent: 8px;\\n}\\n.field__chat .btn__code[data-v-65f609dc] {\\n  display: inline-block;\\n  width: 60px;\\n  height: 40px;\\n  line-height: 40px;\\n  text-align: center;\\n  background: #ccc;\\n  font-size: 12px;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"bvtx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"6+7L\");\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(\"rjj0\")(\"7af3d3e4\", content, true);\n\n/***/ }),\n\n/***/ \"vi/S\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/field/ChatInput.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ var ChatInput = ({\n  name: 'chat-input',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: '请输入'\n    }\n  },\n  data: function data() {\n    return {};\n  },\n\n  methods: {\n    updateValue: function updateValue(value) {\n      this.$emit('input', value.trim());\n    }\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-65f609dc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/field/ChatInput.vue\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field__chat\"},[_c('input',{ref:\"input\",staticClass:\"chat__input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.updateValue($event.target.value)},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.$emit('click-send')}}}),_c('span',{staticClass:\"btn__code\",on:{\"click\":function($event){_vm.$emit('click-send')}}},[_vm._v(\"发送\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var field_ChatInput = (esExports);\n// CONCATENATED MODULE: ./src/components/field/ChatInput.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"4Zop\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65f609dc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  ChatInput,\n  field_ChatInput,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var components_field_ChatInput = (Component.exports);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/lib/index.js\nvar lib = __webpack_require__(\"DmT9\");\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./src/api/config.js\nvar config = __webpack_require__(\"T452\");\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/views/Chat.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nvar socket = lib_default()(config[\"a\" /* _ip */]);\n/* harmony default export */ var Chat = ({\n  name: 'chat',\n  components: {\n    ChatInput: components_field_ChatInput\n  },\n  data: function data() {\n    return {\n      value: '',\n      toid: '',\n      usericon: '',\n      user: {}\n    };\n  },\n\n  computed: {\n    state: function state() {\n      return this.$store.state.user.userInfo;\n    },\n    targetUser: function targetUser() {\n      return this.$store.state.user.targetUser;\n    },\n    msgList: function msgList() {\n      var _this = this;\n\n      var allMsgList = this.$store.state.user.msgList;\n      return allMsgList.filter(function (v) {\n        if (v.chatid === [_this.targetUser._user._id, _this.state._id].sort().join('-')) {\n          return v;\n        }\n      });\n    }\n  },\n  methods: {\n    back: function back() {\n      this.$router.go(-1);\n    },\n    sendMsg: function sendMsg() {\n      var data = {\n        from: this.state._id, // 消息从哪来（我是发消息的人）\n        to: this.targetUser._user._id, // 消息到哪去\n        content: this.value // 发送的内容\n      };\n      console.log('我发送的消息', data);\n      socket.emit('sendmsg', data);\n      this.value = '';\n    },\n    _readmsg: function _readmsg() {\n      // 离开组件的时候发送读取消息\n      var data = {\n        userid: this.state._id,\n        from: this.$store.state.user.targetUser._user._id\n      };\n      console.log('du xiao xi', data);\n      socket.emit('readmsg', data);\n      this.$store.dispatch('readMsg', data);\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {},\n  activated: function activated() {\n    this.$nextTick(function () {\n      window.scrollTo(0, document.body.scrollHeight);\n    });\n  },\n  deactivated: function deactivated() {\n    this._readmsg();\n  }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18533905\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Chat.vue\nvar Chat_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('van-nav-bar',{staticStyle:{\"z-index\":\"99\"},attrs:{\"title\":_vm.targetUser._user.username?_vm.targetUser._user.username:'',\"leftText\":\"返回\",\"leftArrow\":\"\",\"fixed\":\"\"},nativeOn:{\"click\":function($event){_vm.back($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"my-content\",staticStyle:{\"bottom\":\"40px\"}},_vm._l((_vm.msgList),function(item,index){return _c('div',{key:index},[(item.from==_vm.state._id)?_c('table',{staticClass:\"chat-me\"},[_c('tr',[_c('td',[_c('div',{staticClass:\"pop-box\"},[_c('span',{staticClass:\"pop\"},[_vm._v(_vm._s(item.content))])])]),_vm._v(\" \"),_c('td',{staticClass:\"usericon\"},[_c('span',{staticClass:\"avatar\",style:({background:_vm.state.avatar})})])])]):_c('table',{staticClass:\"chat-other\"},[_c('tr',[_c('td',{staticClass:\"usericon\"},[_c('span',{staticClass:\"avatar\",style:({background:_vm.targetUser._user.avatar?_vm.targetUser._user.avatar:'#eee'})})]),_vm._v(\" \"),_c('td',[_c('div',{staticClass:\"pop-box-other\"},[_c('span',{staticClass:\"pop\"},[_vm._v(_vm._s(item.content))])])])])])])})),_vm._v(\" \"),_c('ChatInput',{on:{\"click-send\":_vm.sendMsg},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)}\nvar Chat_staticRenderFns = []\nvar Chat_esExports = { render: Chat_render, staticRenderFns: Chat_staticRenderFns }\n/* harmony default export */ var views_Chat = (Chat_esExports);\n// CONCATENATED MODULE: ./src/views/Chat.vue\nfunction Chat_injectStyle (ssrContext) {\n  __webpack_require__(\"bvtx\")\n}\nvar Chat_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar Chat___vue_template_functional__ = false\n/* styles */\nvar Chat___vue_styles__ = Chat_injectStyle\n/* scopeId */\nvar Chat___vue_scopeId__ = \"data-v-18533905\"\n/* moduleIdentifier (server only) */\nvar Chat___vue_module_identifier__ = null\nvar Chat_Component = Chat_normalizeComponent(\n  Chat,\n  views_Chat,\n  Chat___vue_template_functional__,\n  Chat___vue_styles__,\n  Chat___vue_scopeId__,\n  Chat___vue_module_identifier__\n)\n\n/* harmony default export */ var src_views_Chat = __webpack_exports__[\"default\"] = (Chat_Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/1.22ce589c22bd6fe2338a.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65f609dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/stylus-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./ChatInput.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"4edd020d\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-65f609dc\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/field/ChatInput.vue\n// module id = 4Zop\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n#chat[data-v-18533905] {\\n  padding-bottom: 50px;\\n  padding-top: 46px;\\n}\\n.chat-me[data-v-18533905],\\n.chat-other[data-v-18533905] {\\n  width: 100%;\\n  text-align: right;\\n  font-size: 14px;\\n  color: #333;\\n  position: relative;\\n}\\n.chat-me .usericon[data-v-18533905],\\n.chat-other .usericon[data-v-18533905] {\\n  vertical-align: top;\\n  width: 35px;\\n}\\n.chat-me .pop-box[data-v-18533905],\\n.chat-other .pop-box[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: right;\\n}\\n.chat-me .pop-box-other[data-v-18533905],\\n.chat-other .pop-box-other[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: left;\\n}\\n.chat-me .pop[data-v-18533905],\\n.chat-other .pop[data-v-18533905] {\\n  background: rgba(6, 191, 4, 0.4);\\n  border-radius: 4px;\\n  padding: 8px 12px;\\n  display: block;\\n  height: 100%;\\n  text-align: left;\\n}\\n.chat-me .avatar[data-v-18533905],\\n.chat-other .avatar[data-v-18533905] {\\n  vertical-align: top;\\n  display: inline-block;\\n  width: 35px;\\n  height: 35px;\\n  border-radius: 50%;\\n}\\n.chat-other[data-v-18533905] {\\n  text-align: left;\\n}\\n.chat-other .pop[data-v-18533905] {\\n  background: #eee;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"D:/Users/Administrator/Desktop/workspace/order/order/src/views/Chat.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,kBAAkB;CACnB;AACD;;EAEE,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,YAAY;EACZ,mBAAmB;CACpB;AACD;;EAEE,oBAAoB;EACpB,YAAY;CACb;AACD;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,aAAa;CACd;AACD;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,YAAY;CACb;AACD;;EAEE,iCAAiC;EACjC,mBAAmB;EACnB,kBAAkB;EAClB,eAAe;EACf,aAAa;EACb,iBAAiB;CAClB;AACD;;EAEE,oBAAoB;EACpB,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,mBAAmB;CACpB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,iBAAiB;CAClB\",\"file\":\"Chat.vue\",\"sourcesContent\":[\"\\n#chat[data-v-18533905] {\\n  padding-bottom: 50px;\\n  padding-top: 46px;\\n}\\n.chat-me[data-v-18533905],\\n.chat-other[data-v-18533905] {\\n  width: 100%;\\n  text-align: right;\\n  font-size: 14px;\\n  color: #333;\\n  position: relative;\\n}\\n.chat-me .usericon[data-v-18533905],\\n.chat-other .usericon[data-v-18533905] {\\n  vertical-align: top;\\n  width: 35px;\\n}\\n.chat-me .pop-box[data-v-18533905],\\n.chat-other .pop-box[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: right;\\n}\\n.chat-me .pop-box-other[data-v-18533905],\\n.chat-other .pop-box-other[data-v-18533905] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  float: left;\\n}\\n.chat-me .pop[data-v-18533905],\\n.chat-other .pop[data-v-18533905] {\\n  background: rgba(6, 191, 4, 0.4);\\n  border-radius: 4px;\\n  padding: 8px 12px;\\n  display: block;\\n  height: 100%;\\n  text-align: left;\\n}\\n.chat-me .avatar[data-v-18533905],\\n.chat-other .avatar[data-v-18533905] {\\n  vertical-align: top;\\n  display: inline-block;\\n  width: 35px;\\n  height: 35px;\\n  border-radius: 50%;\\n}\\n.chat-other[data-v-18533905] {\\n  text-align: left;\\n}\\n.chat-other .pop[data-v-18533905] {\\n  background: #eee;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-18533905\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Chat.vue\n// module id = 6+7L\n// module chunks = 1","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.field__chat[data-v-65f609dc] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  height: 40px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  z-index: 99;\\n}\\n.field__chat .chat__input[data-v-65f609dc] {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  height: 40px;\\n  border: none;\\n  outline: none;\\n  font-size: 14px;\\n  text-indent: 8px;\\n}\\n.field__chat .btn__code[data-v-65f609dc] {\\n  display: inline-block;\\n  width: 60px;\\n  height: 40px;\\n  line-height: 40px;\\n  text-align: center;\\n  background: #ccc;\\n  font-size: 12px;\\n}\", \"\", {\"version\":3,\"sources\":[\"D:/Users/Administrator/Desktop/workspace/order/order/src/components/field/ChatInput.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;CACb;AACD;EACE,oBAAoB;MAChB,YAAY;UACR,QAAQ;EAChB,aAAa;EACb,aAAa;EACb,cAAc;EACd,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,sBAAsB;EACtB,YAAY;EACZ,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;CACjB\",\"file\":\"ChatInput.vue\",\"sourcesContent\":[\"\\n.field__chat[data-v-65f609dc] {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  height: 40px;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0;\\n  left: 0;\\n  z-index: 99;\\n}\\n.field__chat .chat__input[data-v-65f609dc] {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1;\\n          flex: 1;\\n  height: 40px;\\n  border: none;\\n  outline: none;\\n  font-size: 14px;\\n  text-indent: 8px;\\n}\\n.field__chat .btn__code[data-v-65f609dc] {\\n  display: inline-block;\\n  width: 60px;\\n  height: 40px;\\n  line-height: 40px;\\n  text-align: center;\\n  background: #ccc;\\n  font-size: 12px;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-65f609dc\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/field/ChatInput.vue\n// module id = TMDl\n// module chunks = 1","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18533905\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/less-loader/dist/cjs.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Chat.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7af3d3e4\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-18533905\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Chat.vue\n// module id = bvtx\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65f609dc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChatInput.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChatInput.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-65f609dc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChatInput.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-65f609dc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/field/ChatInput.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18533905\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18533905\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-18533905\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Chat.vue\n// module id = null\n// module chunks = ","<template lang=\"pug\">\r\n  div.field__chat\r\n    input(\r\n      type=\"text\"\r\n      class=\"chat__input\"\r\n      ref=\"input\"\r\n      v-bind:value=\"value\"\r\n      v-on:input=\"updateValue($event.target.value)\"\r\n      :placeholder=\"placeholder\"\r\n      @keyup.enter=\"$emit('click-send')\"\r\n    )\r\n    span.btn__code(@click=\"$emit('click-send')\" ) 发送\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'chat-input',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: '请输入'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    }\r\n  },\r\n  methods: {\r\n    updateValue(value) {\r\n      this.$emit('input', value.trim())\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped lang=\"stylus\" type=\"text/stylus\">\r\n.field__chat {\r\n  display: flex;\r\n  height: 40px;\r\n  position: absolute;\r\n  bottom: 0;\r\n  right: 0;\r\n  left: 0;\r\n  z-index: 99;\r\n\r\n  .chat__input {\r\n    flex: 1;\r\n    height: 40px;\r\n    border: none;\r\n    outline: none;\r\n    font-size: 14px;\r\n    text-indent: 8px;\r\n  }\r\n\r\n  .btn__code {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    text-align: center;\r\n    background: #ccc;\r\n    font-size: 12px;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/field/ChatInput.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"field__chat\"},[_c('input',{ref:\"input\",staticClass:\"chat__input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.updateValue($event.target.value)},\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.$emit('click-send')}}}),_c('span',{staticClass:\"btn__code\",on:{\"click\":function($event){_vm.$emit('click-send')}}},[_vm._v(\"发送\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-65f609dc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/field/ChatInput.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"chat\">\r\n    <van-nav-bar :title=\"targetUser._user.username?targetUser._user.username:''\" leftText=\"返回\" @click.native=\"back\" leftArrow fixed style=\"z-index:99\">\r\n    </van-nav-bar>\r\n    <div class=\"my-content\" style=\"bottom:40px\">\r\n      <div v-for=\"(item,index) in msgList\" :key=\"index\">\r\n        <!-- {{item.create_time}} -->\r\n        <table class=\"chat-me\" v-if=\"item.from==state._id\">\r\n          <tr>\r\n            <td>\r\n              <div class=\"pop-box\"><span class=\"pop\">{{item.content}}</span></div>\r\n            </td>\r\n            <td class=\"usericon\"><span class=\"avatar\" :style=\"{background:state.avatar}\"></span></td>\r\n          </tr>\r\n        </table>\r\n        <table class=\"chat-other\" v-else>\r\n          <tr>\r\n            <td class=\"usericon\"><span class=\"avatar\" :style=\"{background:targetUser._user.avatar?targetUser._user.avatar:'#eee'}\"></span></td>\r\n            <td>\r\n              <div class=\"pop-box-other\"><span class=\"pop\">{{item.content}}</span></div>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <ChatInput v-model=\"value\" @click-send=\"sendMsg\"></ChatInput>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import ChatInput from '@/components/field/ChatInput.vue'\r\n  import io from 'socket.io-client'\r\n  import {\r\n    _ip\r\n  } from '../api/config'\r\n  const socket = io(_ip)\r\n  export default {\r\n    name: 'chat',\r\n    components: {\r\n      ChatInput\r\n    },\r\n    data() {\r\n      return {\r\n        value: '',\r\n        toid: '',\r\n        usericon: '',\r\n        user: {}\r\n      }\r\n    },\r\n    computed: {\r\n      state() {\r\n        return this.$store.state.user.userInfo\r\n      },\r\n      targetUser() {\r\n        return this.$store.state.user.targetUser\r\n      },\r\n      msgList() {\r\n        const allMsgList = this.$store.state.user.msgList\r\n        return allMsgList.filter(v => {\r\n          if (v.chatid === [this.targetUser._user._id, this.state._id].sort().join('-')) {\r\n            return v\r\n          }\r\n        })\r\n      }\r\n    },\r\n    methods: {\r\n      back() {\r\n        this.$router.go(-1)\r\n      },\r\n      sendMsg() {\r\n        let data = {\r\n          from: this.state._id, // 消息从哪来（我是发消息的人）\r\n          to: this.targetUser._user._id, // 消息到哪去\r\n          content: this.value // 发送的内容\r\n        }\r\n        console.log('我发送的消息', data)\r\n        socket.emit('sendmsg', data)\r\n        this.value = ''\r\n      },\r\n      _readmsg() {\r\n        // 离开组件的时候发送读取消息\r\n        let data = {\r\n          userid: this.state._id,\r\n          from: this.$store.state.user.targetUser._user._id\r\n        }\r\n        console.log('du xiao xi', data)\r\n        socket.emit('readmsg', data)\r\n        this.$store.dispatch('readMsg', data)\r\n      }\r\n    },\r\n    created() {},\r\n    mounted() {},\r\n    activated() {\r\n      this.$nextTick(() => {\r\n        window.scrollTo(0, document.body.scrollHeight)\r\n      })\r\n    },\r\n    deactivated() {\r\n      this._readmsg()\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  #chat {\r\n    padding-bottom: 50px;\r\n    padding-top: 46px;\r\n  }\r\n  .chat-me,\r\n  .chat-other {\r\n    width: 100%;\r\n    text-align: right;\r\n    font-size: 14px;\r\n    color: #333;\r\n    position: relative;\r\n    .usericon {\r\n      vertical-align: top;\r\n      width: 35px;\r\n    }\r\n    .pop-box {\r\n      display: flex;\r\n      float: right;\r\n    }\r\n    .pop-box-other {\r\n      display: flex;\r\n      float: left;\r\n    }\r\n    .pop {\r\n      background: rgba(6, 191, 4, 0.4);\r\n      border-radius: 4px;\r\n      padding: 8px 12px;\r\n      display: block;\r\n      height: 100%;\r\n      text-align: left;\r\n    }\r\n    .avatar {\r\n      vertical-align: top;\r\n      display: inline-block;\r\n      width: 35px;\r\n      height: 35px;\r\n      border-radius: 50%;\r\n    }\r\n  }\r\n  .chat-other {\r\n    text-align: left;\r\n    .pop {\r\n      background: #eee;\r\n    }\r\n  }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('van-nav-bar',{staticStyle:{\"z-index\":\"99\"},attrs:{\"title\":_vm.targetUser._user.username?_vm.targetUser._user.username:'',\"leftText\":\"返回\",\"leftArrow\":\"\",\"fixed\":\"\"},nativeOn:{\"click\":function($event){_vm.back($event)}}}),_vm._v(\" \"),_c('div',{staticClass:\"my-content\",staticStyle:{\"bottom\":\"40px\"}},_vm._l((_vm.msgList),function(item,index){return _c('div',{key:index},[(item.from==_vm.state._id)?_c('table',{staticClass:\"chat-me\"},[_c('tr',[_c('td',[_c('div',{staticClass:\"pop-box\"},[_c('span',{staticClass:\"pop\"},[_vm._v(_vm._s(item.content))])])]),_vm._v(\" \"),_c('td',{staticClass:\"usericon\"},[_c('span',{staticClass:\"avatar\",style:({background:_vm.state.avatar})})])])]):_c('table',{staticClass:\"chat-other\"},[_c('tr',[_c('td',{staticClass:\"usericon\"},[_c('span',{staticClass:\"avatar\",style:({background:_vm.targetUser._user.avatar?_vm.targetUser._user.avatar:'#eee'})})]),_vm._v(\" \"),_c('td',[_c('div',{staticClass:\"pop-box-other\"},[_c('span',{staticClass:\"pop\"},[_vm._v(_vm._s(item.content))])])])])])])})),_vm._v(\" \"),_c('ChatInput',{on:{\"click-send\":_vm.sendMsg},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18533905\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Chat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}