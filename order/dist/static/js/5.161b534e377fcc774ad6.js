webpackJsonp([5],{prcO:function(e,n,t){var o=t("weH2");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);t("rjj0")("228fa689",o,!0)},tcoL:function(e,n,t){"use strict";function o(e){t("prcO")}Object.defineProperty(n,"__esModule",{value:!0});var r={name:"field__code",props:{value:{type:String,default:""},count:{type:Number,default:60},placeholder:{type:String,default:"请输入验证码"}},data:function(){return{__timer:null,countDown:this.count}},methods:{countdown:function(){var e=this;this.countDown--,this.__timer=setInterval(function(){0===--e.countDown&&(e.countDown=e.count,clearInterval(e.__timer))},1e3)},updateValue:function(e){this.$emit("input",e.trim())}}},s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("van-cell",{staticStyle:{padding:"0"}},[t("div",{staticClass:"field__code"},[t("input",{ref:"input",staticClass:"input__code",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(n){e.updateValue(n.target.value)}}}),this.count==e.countDown?t("span",{staticClass:"btn__code",on:{click:function(n){e.countdown(60)}}},[e._v("发送验证码")]):e._e(),this.count!==e.countDown?t("span",{staticClass:"btn__code"},[e._v("重新发送("+e._s(e.countDown)+")")]):e._e()])])},i=[],a={render:s,staticRenderFns:i},c=a,l=t("VU/8"),d=o,p=l(r,c,!1,d,"data-v-3eb47fc6",null),u=p.exports,f=t("/Yk5"),v=t("kg1Y"),h=t("lbHh"),_=t.n(h),A={name:"register",components:{FieldCode:u,TButton:f.a,Logo:v.a},data:function(){return{username:"",code:"1024",password:"",repassword:"",error:!1,errorMsg:"",type:"1"}},methods:{toLogin:function(){this.$router.push("/login")},back:function(){this.$router.go(-1)},login:function(e){var n,t=this;if(e)n=e;else{if(""===this.username||""===this.password)return this.error=!0,void(this.errorMsg="用户名或密码不能为空");n={username:this.username,password:this.password}}this.$api.LOGIN(n).then(function(e){0===e.code?t.$api.GET_INFO().then(function(n){0===n.code?(_.a.set("_userId",{_id:e.data._id}),t.$store.dispatch("getUserInfo",n.data),t.$store.dispatch("getOrderList"),t.$router.push("/index")):1===n.code&&_.a.remove("_userId")}):(t.error=!0,t.errorMsg=e.msg)})},register:function(){var e=this;if(""===this.username||""===this.password)return this.error=!0,void(this.errorMsg="用户名和密码不能为空");if(this.password!==this.repassword)return this.error=!0,void(this.errorMsg="两次密码不一致");var n={username:this.username,code:this.code,password:this.password,type:this.type};this.$api.REGISTER(n).then(function(n){0===n.code?e.$router.push("/login"):(e.error=!0,e.errorMsg=n.msg)})}}},g=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"register"}},[t("van-nav-bar",{attrs:{title:"注册",leftText:"返回",leftArrow:"",fixed:""},on:{"click-left":e.back}}),e._v(" "),t("van-cell-group",{staticStyle:{"margin-top":"60px"}},[t("van-field",{attrs:{icon:"clear",placeholder:"请输入用户名"},on:{"click-icon":function(n){e.username=""}},model:{value:e.username,callback:function(n){e.username=n},expression:"username"}}),e._v(" "),t("van-field",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}}),e._v(" "),t("van-field",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.repassword,callback:function(n){e.repassword=n},expression:"repassword"}}),e._v(" "),t("van-cell",[t("van-radio",{attrs:{name:"1"},model:{value:e.type,callback:function(n){e.type=n},expression:"type"}},[e._v("我需要服务")])],1),e._v(" "),t("van-cell",[t("van-radio",{attrs:{name:"2"},model:{value:e.type,callback:function(n){e.type=n},expression:"type"}},[e._v("我是工程师")])],1)],1),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error"},[e._v(e._s(e.errorMsg))]),e._v(" "),t("t-button",{nativeOn:{click:function(n){e.register(n)}}},[e._v("注册")]),e._v(" "),t("p",{staticClass:"help",on:{click:e.toLogin}},[e._v("登录")]),e._v(" "),t("p",[t("van-tag",{attrs:{plain:"",type:"primary"},nativeOn:{click:function(n){e.login({username:"G1",password:"123"})}}},[e._v("测试工程师1登录")]),e._v(" "),t("van-tag",{attrs:{plain:"",type:"success"},nativeOn:{click:function(n){e.login({username:"K1",password:"123"})}}},[e._v("测试客户1登录")])],1)],1)},m=[],x={render:g,staticRenderFns:m},b=x,w=t("VU/8"),C=w(A,b,!1,null,null,null);n.default=C.exports},weH2:function(e,n,t){n=e.exports=t("FZ+f")(!0),n.push([e.i,"\n.field__code[data-v-3eb47fc6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 44px;\n}\n.field__code .input__code[data-v-3eb47fc6] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 44px;\n  border: none;\n  outline: none;\n  font-size: 14px;\n}\n.field__code .btn__code[data-v-3eb47fc6] {\n  display: inline-block;\n  width: 100px;\n  height: 44px;\n  line-height: 44px;\n  text-align: center;\n  background: #ccc;\n  font-size: 12px;\n}","",{version:3,sources:["D:/Users/Administrator/Desktop/order-service/order-service/order/src/components/field/FieldCode.vue"],names:[],mappings:";AACA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,aAAa;CACd;AACD;EACE,oBAAoB;MAChB,YAAY;UACR,QAAQ;EAChB,aAAa;EACb,aAAa;EACb,cAAc;EACd,gBAAgB;CACjB;AACD;EACE,sBAAsB;EACtB,aAAa;EACb,aAAa;EACb,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;EACjB,gBAAgB;CACjB",file:"FieldCode.vue",sourcesContent:["\n.field__code[data-v-3eb47fc6] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 44px;\n}\n.field__code .input__code[data-v-3eb47fc6] {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 44px;\n  border: none;\n  outline: none;\n  font-size: 14px;\n}\n.field__code .btn__code[data-v-3eb47fc6] {\n  display: inline-block;\n  width: 100px;\n  height: 44px;\n  line-height: 44px;\n  text-align: center;\n  background: #ccc;\n  font-size: 12px;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=5.161b534e377fcc774ad6.js.map